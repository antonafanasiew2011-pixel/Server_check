{% extends "base.html" %}
{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ ‚Ä¢ Server Check{% endblock %}
{% block content %}
  <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä</h2>
  <form method="post" action="/servers/{{ s.id }}/edit" style="display:grid; gap:8px; max-width:800px;">
    <input name="hostname" value="{{ s.hostname }}" placeholder="Hostname" required />
    <input name="ip_address" value="{{ s.ip_address }}" placeholder="IP" required />
    <input name="system_name" value="{{ s.system_name or '' }}" placeholder="–°–∏—Å—Ç–µ–º–∞" />
    <input name="owner" value="{{ s.owner or '' }}" placeholder="–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π" />
    <select name="environment" required>
      <option value="prod" {% if s.environment=='prod' %}selected{% endif %}>üè≠ Prod</option>
      <option value="stage" {% if s.environment=='stage' %}selected{% endif %}>üöÄ Stage</option>
      <option value="test" {% if s.environment=='test' %}selected{% endif %}>üß™ Test</option>
    </select>
    <input name="tags" value="{{ s.tags or '' }}" placeholder="–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)" />
    <div>
      <label><input type="checkbox" name="is_cluster" value="true" {% if s.is_cluster %}checked{% endif %}/> –ö–ª–∞—Å—Ç–µ—Ä</label>
    </div>
    <h3>SSH</h3>
    <input name="ssh_host" value="{{ s.ssh_host or '' }}" placeholder="SSH host" />
    <input name="ssh_port" value="{{ s.ssh_port or 22 }}" placeholder="SSH port" />
    <input name="ssh_username" value="{{ s.ssh_username or '' }}" placeholder="SSH user" />
    <input name="ssh_password" value="{{ s.ssh_password or '' }}" placeholder="SSH pass" />
    <h3>SNMP</h3>
    <input name="snmp_version" value="{{ s.snmp_version or 'v2c' }}" placeholder="SNMP ver (v2c)" />
    <input name="snmp_community" value="{{ s.snmp_community or '' }}" placeholder="SNMP community" />
    <h3>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å–æ–≤</h3>
    <input name="services_to_monitor" value="{{ s.services_to_monitor or '' }}" placeholder='–°–µ—Ä–≤–∏—Å—ã (JSON): ["nginx", "mysql", "redis"]' />
    <small style="color: #666; font-size: 12px;">–í–≤–µ–¥–∏—Ç–µ JSON –º–∞—Å—Å–∏–≤ –Ω–∞–∑–≤–∞–Ω–∏–π —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ systemctl</small>
    
    <h3>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ä—Ç–æ–≤</h3>
    <input name="ports_to_monitor" value="{{ s.ports_to_monitor or '' }}" placeholder='–ü–æ—Ä—Ç—ã (JSON): ["80", "443", "3306"]' />
    <small style="color: #666; font-size: 12px;">–í–≤–µ–¥–∏—Ç–µ JSON –º–∞—Å—Å–∏–≤ –Ω–æ–º–µ—Ä–æ–≤ –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏</small>
    
    <h3>–ò—Å—Ç–æ—á–Ω–∏–∫ –º–µ—Ç—Ä–∏–∫</h3>
    <select name="metric_source">
      <option value="auto" {% if s.metric_source=='auto' %}selected{% endif %}>–ê–≤—Ç–æ</option>
      <option value="local" {% if s.metric_source=='local' %}selected{% endif %}>Local</option>
      <option value="ssh" {% if s.metric_source=='ssh' %}selected{% endif %}>SSH</option>
      <option value="snmp" {% if s.metric_source=='snmp' %}selected{% endif %}>SNMP</option>
    </select>
    <div>
      <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <a href="/servers/{{ s.id }}">–û—Ç–º–µ–Ω–∞</a>
    </div>
  </form>
{% endblock %}


